@if (!isLoading) {
  <div class="container-fluid content-wrapper">

    <!-- MOBILE: Single column layout -->
    @if (columns === 1) {
      @for (project of projects; track project.id; let idx = $index) {
        <div class="col mb-3">
          <div class="image-container">
            <img
              [src]="project.pictureUrl"
              [alt]="project.name"
              [routerLink]="'/projects/research/globokar-oliveros/' + project.id"
              routerLinkActive="activebutton"
              ariaCurrentWhenActive="page"
              [loading]="idx < 3 ? 'eager' : 'lazy'"
              [attr.fetchpriority]="idx < 2 ? 'high' : 'auto'"
            />
            <div class="overlay">{{ project.name }}</div>
          </div>
        </div>
      }
    }

    <!-- DESKTOP/TABLET LAYOUTS -->
    @if (columns > 1) {

      <!-- Layout 0: Asymmetric Grid with Feature -->
      @if (layoutType === 0) {
        <!-- Row 1: Featured + 2 items -->
        <div class="row">
          <div class="col-8">
            <div class="image-container featured">
              <img [src]="f0.pictureUrl" [alt]="f0.name" [title]="f0.name" [routerLink]="'/projects/research/globokar-oliveros/' + f0.id" fetchpriority="high" loading="eager" />
              <div class="overlay">{{ f0.name }}</div>
            </div>
          </div>
          <div class="col-4">
            <div class="row h-50 mb-1">
              <div class="col-12">
                <div class="image-container no-margin">
                  <img [src]="f1.pictureUrl" [alt]="f1.name" [title]="f1.name" [routerLink]="'/projects/research/globokar-oliveros/' + f1.id" loading="eager" />
                  <div class="overlay">{{ f1.name }}</div>
                </div>
              </div>
            </div>
            <div class="row h-50">
              <div class="col-12">
                <div class="image-container no-margin">
                  <img [src]="f2.pictureUrl" [alt]="f2.name" [title]="f2.name" [routerLink]="'/projects/research/globokar-oliveros/' + f2.id" loading="eager" />
                  <div class="overlay">{{ f2.name }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Row 2: 5 equal items -->
        <div class="row">
          <div class="col"><div class="image-container"><img [src]="f3.pictureUrl" [alt]="f3.name" [title]="f3.name" [routerLink]="'/projects/research/globokar-oliveros/' + f3.id" loading="lazy" /><div class="overlay">{{ f3.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f4.pictureUrl" [alt]="f4.name" [title]="f4.name" [routerLink]="'/projects/research/globokar-oliveros/' + f4.id" loading="lazy" /><div class="overlay">{{ f4.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f5.pictureUrl" [alt]="f5.name" [title]="f5.name" [routerLink]="'/projects/research/globokar-oliveros/' + f5.id" loading="lazy" /><div class="overlay">{{ f5.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f6.pictureUrl" [alt]="f6.name" [title]="f6.name" [routerLink]="'/projects/research/globokar-oliveros/' + f6.id" loading="lazy" /><div class="overlay">{{ f6.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f7.pictureUrl" [alt]="f7.name" [title]="f7.name" [routerLink]="'/projects/research/globokar-oliveros/' + f7.id" loading="lazy" /><div class="overlay">{{ f7.name }}</div></div></div>
        </div>

        <!-- Row 3: 4 items + 1 wide -->
        <div class="row">
          <div class="col-2"><div class="image-container"><img [src]="f8.pictureUrl" [alt]="f8.name" [title]="f8.name" [routerLink]="'/projects/research/globokar-oliveros/' + f8.id" loading="lazy" /><div class="overlay">{{ f8.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f9.pictureUrl" [alt]="f9.name" [title]="f9.name" [routerLink]="'/projects/research/globokar-oliveros/' + f9.id" loading="lazy" /><div class="overlay">{{ f9.name }}</div></div></div>
          <div class="col-4"><div class="image-container medium-wide"><img [src]="f10.pictureUrl" [alt]="f10.name" [title]="f10.name" [routerLink]="'/projects/research/globokar-oliveros/' + f10.id" loading="lazy" /><div class="overlay">{{ f10.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f11.pictureUrl" [alt]="f11.name" [title]="f11.name" [routerLink]="'/projects/research/globokar-oliveros/' + f11.id" loading="lazy" /><div class="overlay">{{ f11.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f12.pictureUrl" [alt]="f12.name" [title]="f12.name" [routerLink]="'/projects/research/globokar-oliveros/' + f12.id" loading="lazy" /><div class="overlay">{{ f12.name }}</div></div></div>
        </div>

        <!-- Row 4: Last 2 items -->
        <div class="row">
          <div class="col-6"><div class="image-container"><img [src]="f13.pictureUrl" [alt]="f13.name" [title]="f13.name" [routerLink]="'/projects/research/globokar-oliveros/' + f13.id" loading="lazy" /><div class="overlay">{{ f13.name }}</div></div></div>
          <div class="col-6"><div class="image-container"><img [src]="f14.pictureUrl" [alt]="f14.name" [title]="f14.name" [routerLink]="'/projects/research/globokar-oliveros/' + f14.id" loading="lazy" /><div class="overlay">{{ f14.name }}</div></div></div>
        </div>
      }

      <!-- Layout 1: Symmetric 3x5 Grid -->
      @if (layoutType === 1) {
        <div class="row">
          <div class="col"><div class="image-container"><img [src]="f0.pictureUrl" [alt]="f0.name" [title]="f0.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f0.id" /><div class="overlay">{{ f0.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f1.pictureUrl" [alt]="f1.name" [title]="f1.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f1.id" /><div class="overlay">{{ f1.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f2.pictureUrl" [alt]="f2.name" [title]="f2.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f2.id" /><div class="overlay">{{ f2.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f3.pictureUrl" [alt]="f3.name" [title]="f3.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f3.id" /><div class="overlay">{{ f3.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f4.pictureUrl" [alt]="f4.name" [title]="f4.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f4.id" /><div class="overlay">{{ f4.name }}</div></div></div>
        </div>
        <div class="row">
          <div class="col"><div class="image-container"><img [src]="f5.pictureUrl" [alt]="f5.name" [title]="f5.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f5.id" /><div class="overlay">{{ f5.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f6.pictureUrl" [alt]="f6.name" [title]="f6.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f6.id" /><div class="overlay">{{ f6.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f7.pictureUrl" [alt]="f7.name" [title]="f7.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f7.id" /><div class="overlay">{{ f7.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f8.pictureUrl" [alt]="f8.name" [title]="f8.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f8.id" /><div class="overlay">{{ f8.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f9.pictureUrl" [alt]="f9.name" [title]="f9.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f9.id" /><div class="overlay">{{ f9.name }}</div></div></div>
        </div>
        <div class="row">
          <div class="col"><div class="image-container"><img [src]="f10.pictureUrl" [alt]="f10.name" [title]="f10.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f10.id" /><div class="overlay">{{ f10.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f11.pictureUrl" [alt]="f11.name" [title]="f11.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f11.id" /><div class="overlay">{{ f11.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f12.pictureUrl" [alt]="f12.name" [title]="f12.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f12.id" /><div class="overlay">{{ f12.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f13.pictureUrl" [alt]="f13.name" [title]="f13.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f13.id" /><div class="overlay">{{ f13.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f14.pictureUrl" [alt]="f14.name" [title]="f14.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f14.id" /><div class="overlay">{{ f14.name }}</div></div></div>
        </div>
      }

      <!-- Layout 2: Centered Pattern -->
      @if (layoutType === 2) {
        <!-- Row 1: 2 + Featured + 2 -->
        <div class="row">
          <div class="col-2"><div class="image-container"><img [src]="f0.pictureUrl" [alt]="f0.name" [title]="f0.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f0.id" /><div class="overlay">{{ f0.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f1.pictureUrl" [alt]="f1.name" [title]="f1.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f1.id" /><div class="overlay">{{ f1.name }}</div></div></div>
          <div class="col-4"><div class="image-container featured"><img [src]="f2.pictureUrl" [alt]="f2.name" [title]="f2.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f2.id" /><div class="overlay">{{ f2.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f3.pictureUrl" [alt]="f3.name" [title]="f3.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f3.id" /><div class="overlay">{{ f3.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f4.pictureUrl" [alt]="f4.name" [title]="f4.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f4.id" /><div class="overlay">{{ f4.name }}</div></div></div>
        </div>

        <!-- Row 2: 5 equal -->
        <div class="row">
          <div class="col"><div class="image-container"><img [src]="f5.pictureUrl" [alt]="f5.name" [title]="f5.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f5.id" /><div class="overlay">{{ f5.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f6.pictureUrl" [alt]="f6.name" [title]="f6.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f6.id" /><div class="overlay">{{ f6.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f7.pictureUrl" [alt]="f7.name" [title]="f7.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f7.id" /><div class="overlay">{{ f7.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f8.pictureUrl" [alt]="f8.name" [title]="f8.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f8.id" /><div class="overlay">{{ f8.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f9.pictureUrl" [alt]="f9.name" [title]="f9.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f9.id" /><div class="overlay">{{ f9.name }}</div></div></div>
        </div>

        <!-- Row 3: 5 equal -->
        <div class="row">
          <div class="col"><div class="image-container"><img [src]="f10.pictureUrl" [alt]="f10.name" [title]="f10.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f10.id" /><div class="overlay">{{ f10.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f11.pictureUrl" [alt]="f11.name" [title]="f11.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f11.id" /><div class="overlay">{{ f11.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f12.pictureUrl" [alt]="f12.name" [title]="f12.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f12.id" /><div class="overlay">{{ f12.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f13.pictureUrl" [alt]="f13.name" [title]="f13.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f13.id" /><div class="overlay">{{ f13.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f14.pictureUrl" [alt]="f14.name" [title]="f14.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f14.id" /><div class="overlay">{{ f14.name }}</div></div></div>
        </div>
      }

      <!-- Layout 3: Diagonal Emphasis -->
      @if (layoutType === 3) {
        <!-- Row 1 -->
        <div class="row">
          <div class="col-3"><div class="image-container"><img [src]="f0.pictureUrl" [alt]="f0.name" [title]="f0.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f0.id" /><div class="overlay">{{ f0.name }}</div></div></div>
          <div class="col-6"><div class="image-container medium-wide"><img [src]="f1.pictureUrl" [alt]="f1.name" [title]="f1.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f1.id" /><div class="overlay">{{ f1.name }}</div></div></div>
          <div class="col-3"><div class="image-container"><img [src]="f2.pictureUrl" [alt]="f2.name" [title]="f2.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f2.id" /><div class="overlay">{{ f2.name }}</div></div></div>
        </div>

        <!-- Row 2 -->
        <div class="row">
          <div class="col"><div class="image-container"><img [src]="f3.pictureUrl" [alt]="f3.name" [title]="f3.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f3.id" /><div class="overlay">{{ f3.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f4.pictureUrl" [alt]="f4.name" [title]="f4.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f4.id" /><div class="overlay">{{ f4.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f5.pictureUrl" [alt]="f5.name" [title]="f5.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f5.id" /><div class="overlay">{{ f5.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f6.pictureUrl" [alt]="f6.name" [title]="f6.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f6.id" /><div class="overlay">{{ f6.name }}</div></div></div>
          <div class="col"><div class="image-container"><img [src]="f7.pictureUrl" [alt]="f7.name" [title]="f7.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f7.id" /><div class="overlay">{{ f7.name }}</div></div></div>
        </div>

        <!-- Row 3 -->
        <div class="row">
          <div class="col-2"><div class="image-container"><img [src]="f8.pictureUrl" [alt]="f8.name" [title]="f8.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f8.id" /><div class="overlay">{{ f8.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f9.pictureUrl" [alt]="f9.name" [title]="f9.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f9.id" /><div class="overlay">{{ f9.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f10.pictureUrl" [alt]="f10.name" [title]="f10.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f10.id" /><div class="overlay">{{ f10.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f11.pictureUrl" [alt]="f11.name" [title]="f11.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f11.id" /><div class="overlay">{{ f11.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f12.pictureUrl" [alt]="f12.name" [title]="f12.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f12.id" /><div class="overlay">{{ f12.name }}</div></div></div>
          <div class="col-2"><div class="image-container"><img [src]="f13.pictureUrl" [alt]="f13.name" [title]="f13.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f13.id" /><div class="overlay">{{ f13.name }}</div></div></div>
        </div>

        <!-- Row 4 -->
        <div class="row">
          <div class="col-12"><div class="image-container featured"><img [src]="f14.pictureUrl" [alt]="f14.name" [title]="f14.name" loading="lazy" [routerLink]="'/projects/research/globokar-oliveros/' + f14.id" /><div class="overlay">{{ f14.name }}</div></div></div>
        </div>
      }
    }
  </div>
} @else {
  <div class="loading-container">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
}
